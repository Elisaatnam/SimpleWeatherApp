(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const p="bdcaff9cf7896aa03cd665ece7d83d76",n=document.querySelector("#search-results"),a=document.querySelector("#city");a==null||a.addEventListener("input",()=>{n&&(n.innerHTML=""),v(a.value)});const v=s=>{typeof s=="number"?fetch(`http://api.openweathermap.org/geo/1.0/zip?zip=${s},DE&appid=${p}`).then(e=>e.json()).then(e=>{[e][0].cod||E([e])}).catch(e=>console.error(e)):fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${s}&limit=5&appid=${p}`).then(e=>e.json()).then(e=>{E(e)}).catch(e=>console.error(e))},E=s=>{n&&(n.innerHTML=""),s.forEach(e=>{console.log(e);const r=document.createElement("div"),l=e.name,t=e.country,o=e.state,i=e.lat,u=e.lon,h=document.createElement("h3");h.textContent=l,r.appendChild(h);const f=document.createElement("p");if(f.textContent=t,r.appendChild(f),o){const c=document.createElement("p");c.textContent=o,r.appendChild(c)}const d=document.createElement("button");d.textContent="Show weather",d.addEventListener("click",()=>{fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${i}&lon=${u}&appid=${p}&units=metric`).then(c=>c.json()).then(c=>{n&&(n.innerHTML=""),console.log(c);const $=Math.round(c.main.temp),w=Math.round(c.main.feels_like),O=c.weather[0].description,m=document.createElement("h3");m.innerHTML=l;const y=document.createElement("p");y.innerText=`Currently: ${$} °C`;const C=document.createElement("p");C.innerText=`Feels like: ${w} °C`;const g=document.createElement("p");g.innerText=`${O}`,M(i,u),n&&(n.appendChild(m),n.appendChild(y),n.appendChild(C),n.appendChild(g))}).catch(c=>console.error("error at second fetch",c))}),r.appendChild(d),n&&n.appendChild(r)})},M=(s,e)=>{fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${s}&lon=${e}&appid=${p}`).then(r=>r.json()).then(r=>console.log(r)).catch(r=>console.error("forecast",r))};var L;(L=document.querySelector("#reset"))==null||L.addEventListener("click",()=>{a&&n&&(a.value="",n.innerHTML="")});
